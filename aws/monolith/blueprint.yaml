apiVersion: xl/v1
kind: Blueprint
metadata:
  projectName: AWS-Monolith-ECS-Fargate 
  description: |
    The blueprint deploys a monolithic application generated with JHipster, to AWS ECS with fargate launch type.
    XL deploy does the provisioning and deployment, while XL release orchestrates everything.
  author: XebiaLabs
  version: 1.0
spec:
- name: AppName
  type: Input
  description: What is the Application name?
- name: PublicPort
  type: Input
  description: What is the public port?
  value: 80
- name: MySQLMasterPassword
  type: Input
  description: What is the master password for MySQL?
  secret: true
- name: UseAWSCredentialsFromSystem
  type: Confirm
  description: Do you want to use AWS credentials from ~/.aws/credentials file?
  dependsOnTrue: !fn aws.credentials().IsAvailable
- name: AWSAccessKey
  type: Input
  secret: true
  description: What is the AWS access key?
  dependsOnFalse: UseAWSCredentialsFromSystem
  default: !fn aws.credentials().AccessKeyID
- name: AWSAccessSecret
  type: Input
  secret: true
  description: What is the AWS secret?
  dependsOnFalse: UseAWSCredentialsFromSystem
  default: !fn aws.credentials().SecretAccessKey
- name: AWSRegion
  type: Select
  description: What is the AWS region?
  options:
    - !fn aws.regions(ecs)
  default: !fn aws.regions(ecs)[0]