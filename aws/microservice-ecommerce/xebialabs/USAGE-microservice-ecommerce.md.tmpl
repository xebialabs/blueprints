{{$clusterName := .ClusterName | kebabcase}}
# Microservice Application on Amazon EKS Usage

## Deploy the blueprint to the XL Platform

To deploy this blueprint to the XebiaLabs DevOps Platform, follow the steps below:

1. Apply the generated YAML configuration using the XL CLI. Open up a terminal in the folder where you generated the configuration. Then run:

    ```plain
    xl apply -f xebialabs.yaml
    ```

2. Go to XL Release and look for `{{$clusterName}}-ci-cd` under Design and start a new release from it.

## Prerequisites

If you do not have XL Release and XL Deploy instances running, you can use the Docker Compose setup generated by the blueprint to spin them up.

> Please note that you can obtain a trial license or bring your own license for XL Release and XL Deploy if you like. Follow the steps below to use the Docker Compose files.

{{if eq .GenerateDockerComposeSetup true}}
To startup XL Release and XL Deploy:

1. CD into the `docker` folder generated by the blueprint.
2. Run `docker-compose up`.
{{end}}

1. Set the following environment variables before starting the docker containers:

    ```plain
    export GITHUB_USER=<your GitHub user name>
    export GITHUB_TOKEN=<your GitHub access token, needed only if you are using a private repository, this variable can be skipped for public repositories>
    export DOCKER_USER=<your Docker user name>
    export DOCKER_PASS=<your Docker password>
    ```

2. Replace the occurrences of `<your-dockerhub-user>` in the kubernetes `*-deployment.yml` files with your own DockerHub ID
3. Push the cloned repository to your GitHub account so that Jenkins can checkout `https://github.com/${GITHUB_USER}/e-commerce-microservice.git`
4. Run `docker-compose up` on the generated `docker` folder.

## Extras

You can find a detailed tutorial for this blueprint [here](https://docs.xebialabs.com/v.9.0/xl-release/how-to/deploy-to-aws-using-blueprints)

